
<!-- saved from url=(0047)http://dvd.sourceforge.net/dvdinfo/pes-hdr.html -->
<html><style type="text/css" id="night-mode-pro-style"></style><link type="text/css" rel="stylesheet" id="night-mode-pro-link"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><title>Packetized Elementary Stream Headers</title>
<style>.ss-deals-link,
.enhanced-listing,
.ads,
#stackcommerce-header,
#leadform,
#fad
{display:none !important;}</style><style>@media print {#ghostery-purple-box {display:none !important}}</style></head>

<body bgcolor="f0f0ff" background="./Packetized Elementary Stream Headers_files/dvdbg.gif">
<h2>Packetized Elementary Stream Headers</h2>
Depending on the Stream ID, a Packetized Elementary Stream (PES) header may contain various components.
<h3>The header</h3>
<table border="1">
<tbody><tr><th>byte 0</th><th>byte 1</th><th>byte 2</th><th>byte 3</th><th>byte 4</th><th>byte 5</th></tr>
<tr><th bgcolor="9999ff" colspan="3">0000 0000 0000 0000 0000 0001<br>Start code</th>
    <td bgcolor="66ff66">Stream ID</td>
    <td bgcolor="66ff66" colspan="2">PES packet length</td></tr>
</tbody></table>
Stream ID's which pertain to DVD
<table border="1">
<tbody><tr><th>Stream ID</th><th>Stream type</th><th>extension present?</th></tr>
<tr><td>1011 1101<br>0xBD</td><td>Private stream 1 (non MPEG audio, subpictures)</td><td>Yes</td></tr>
<tr><td>1011 1110<br>0xBE</td><td>Padding stream</td><td>No</td></tr>
<tr><td>1011 1111<br>0xBF</td><td>Private stream 2 (navigation data)</td><td>No</td></tr>
<tr><td>110x xxxx<br>0xC0 - 0xDF</td><td>MPEG-1 or MPEG-2 audio stream number x xxxx
    <br>note: DVD allows only 8 audio streams</td><td>Yes</td></tr>
<tr><td>1110 xxxx<br>0xE0 - 0xEF</td><td>MPEG-1 or MPEG-2 video stream number xxxx
    <br>note: DVD allows only 1 video stream</td><td>Yes</td></tr>

</tbody></table>
<h3>The extension</h3>
<table border="1">
<tbody><tr><th colspan="8"><center>byte 6</center></th><th colspan="8"><center>byte 7</center></th>
    <th colspan="8"><center>byte 8</center></th></tr>
<tr><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>
<tr><th bgcolor="9999ff" colspan="2">10</th>
    <td bgcolor="66ff66" colspan="2">PES scrambling control</td>
    <td bgcolor="66ff66">PES priority</td>
    <td bgcolor="66ff66">data alignment indicator</td>
    <td bgcolor="66ff66">copyright</td>
    <td bgcolor="66ff66">original or copy</td>
    <td bgcolor="66ff66" colspan="2">PTS DTS flags</td>
    <td bgcolor="66ff66">ESCR flag</td>
    <td bgcolor="66ff66">ES rate flag</td>
    <td bgcolor="66ff66">DSM trick mode flag</td>
    <td bgcolor="66ff66">additional copy info flag</td>
    <td bgcolor="66ff66">PES CRC flag</td>
    <td bgcolor="66ff66">PES extension flag</td>
    <td bgcolor="66ff66" colspan="8">PES header data length</td>
</tr>
</tbody></table>
The bit fields of the basic extension:
<p>PES scrambling control -- 00 = not scrambled, others are user defined.
</p><p>PES priority -- provides 2 priority levels, 0 and 1.
</p><p>data alignment indicator -- if set to 1 indicates that the PES packet header is immediately
    followed by the video start code or audio syncword.
</p><p>copyright -- 1 = packet contains copyrighted material.
</p><p>original or copy -- 1 = original, 0 = copy.
</p><p>PTS DTS flags -- Presentation Time Stamp / Decode Time Stamp.
    00 = no PTS or DTS data present, 01 is forbidden.
    <br>if set to 10 the following data is appended to the header data field:
<table border="1">
<tbody><tr><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>
<tr><th bgcolor="9999ff" colspan="4">0010</th>
    <td bgcolor="66ff66" colspan="3"><center>PTS 32..30</center></td>
    <th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="15"><center>PTS 29..15</center></td>
    <th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="15"><center>PTS 14..00</center></td>
    <th bgcolor="9999ff">1</th>
</tr>
</tbody></table>

PTS DTS flags -- if set to 11 the following data is appended to the header data field:
<table border="1">
<tbody><tr><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>
<tr><th bgcolor="9999ff" colspan="4">0011</th>
    <td bgcolor="66ff66" colspan="3"><center>PTS 32..30</center></td>
    <th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="15"><center>PTS 29..15</center></td>
    <th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="15"><center>PTS 14..00</center></td>
    <th bgcolor="9999ff">1</th>
</tr>
<tr><th bgcolor="9999ff" colspan="4">0001</th>
    <td bgcolor="66ff66" colspan="3"><center>DTS 32..30</center></td>
    <th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="15"><center>DTS 29..15</center></td>
    <th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="15"><center>DTS 14..00</center></td>
    <th bgcolor="9999ff">1</th>
</tr>
</tbody></table>
presentation and decoder time stamps use the 90KHz clock (SCR / 300)

</p><p>ESCR -- if set to 1 the following data is appended to the header data field:
<table border="1">
<tbody><tr><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>
<tr><th bgcolor="9999ff" colspan="2">00</th>
    <td bgcolor="66ff66" colspan="3"><center>ESCR base 32..30</center></td>
    <th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="15"><center>ESCR base 29..15</center></td>
    <th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="15"><center>ESCR base 14..00</center></td>
    <th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="9"><center>ESCR ext</center></td>
    <th bgcolor="9999ff">1</th>
</tr>
</tbody></table>
This is the Elementary Stream Clock Reference, used if the stream and system levels are not synchronized
(i.e. ESCR differs from SCR in the PACK header).

</p><p>ES rate -- if set to 1 the following data is appended to the header data field:
<table border="1">
<tbody><tr><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>
<tr><th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="22"><center>ES rate</center></td>
    <th bgcolor="9999ff">1</th>
</tr>
</tbody></table>
The rate at which data is delivered for this stream, in units of 50 bytes/second.

</p><p>DSM trick mode - not used by DVD

</p><p>additional copy info -- if set to 1 the following data is appended to the header data field:
<table border="1">
<tbody><tr><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>
<tr><th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="7"><center>additional copy info</center></td>
</tr>
</tbody></table>

</p><p>PES CRC flag -- if set to 1 the following data is appended to the header data field:
<table border="1">
<tbody><tr><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>
<tr><td bgcolor="66ff66" colspan="22"><center>previous PES packet CRC</center></td></tr>
</tbody></table>
The polynomial used is X<sup>16</sup> + X<sup>12</sup> + X<sup>5</sup> + 1

</p><p>PES extension flag -- if set to 1 the following data is appended to the header data field:
<table border="1">
<tbody><tr><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>
<tr><td bgcolor="66ff66"><center>PES private data flag</center></td>
    <td bgcolor="66ff66"><center>pack header field flag</center></td>
    <td bgcolor="66ff66"><center>program packet sequence counter flag</center></td>
    <td bgcolor="66ff66"><center>P-STD buffer flag</center></td>
    <th bgcolor="9999ff" colspan="3">111</th>
    <td bgcolor="66ff66"><center>PES extension flag 2</center></td>
</tr>
</tbody></table>
The bit fields of the first extension:
</p><p>PES private data flag -- if set to 1 16 bytes of user defined data is appended to the header data field.
</p><p>pack header field flag -- if set to 1 the 8-bit pack field length value is appended to the header data field.
</p><p>program packet sequence counter flag -- if set to 1 the following data is appended to the header data field:
<table border="1">
<tbody><tr><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>
<tr><th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="7"><center>packet sequence counter</center></td>
    <th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66"><center>MPEG1_MPEG2 identifier</center></td>
    <td bgcolor="66ff66" colspan="6"><center>original stuffing length</center></td>
</tr>
</tbody></table>

</p><p>P-STD buffer flag -- if set to 1 the following data is appended to the header data field:
<table border="1">
<tbody><tr><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>
<tr><th bgcolor="9999ff" colspan="2">01</th>
    <td bgcolor="66ff66"><center>P-STD buffer scale<br>0 = 128 bytes<br>1 = 1024 bytes</center></td>
    <td bgcolor="66ff66" colspan="13"><center>P-STD buffer size</center></td>
</tr>
</tbody></table>

</p><p>PES extension flag 2 -- if set to 1 the following data is appended to the header data field:
<table border="1">
<tbody><tr><th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
    <th>7</th><th>6</th><th>5</th><th>4</th><th>3</th><th>2</th><th>1</th><th>0</th>
</tr>
<tr><th bgcolor="9999ff">1</th>
    <td bgcolor="66ff66" colspan="7"><center>PES extension field length</center></td>
    <td bgcolor="66ff66" colspan="8"><center>reserved</center></td>
</tr>
</tbody></table>
Which is then followed by the indicated number of bytes.

</p><h3>The rest of the packet</h3>
Following all the extension data are optional stuffing bytes (0xFF), which are included
in the header data length, and then the payload.
<br>In the case of private streams the first byte of the payload is the sub-stream number.

<p><a href="http://dvd.sourceforge.net/dvdinfo/index.html"><img src="./Packetized Elementary Stream Headers_files/dvd-sm.gif">DVD-Video</a> home



</p></body></html>